@{
	if (Context.Session.GetString("User") == null)
	{
		Context.Response.Redirect("/Home/Index");
	}
	ViewData["Title"] = "Wyświetl zamknięte zgłoszenia techniczne";
	var tasksJson = ViewData["TasksJson"] as string;
	var userJson = Context.Session.GetString("User");
	var userRole = "";
	using (var doc = System.Text.Json.JsonDocument.Parse(userJson))
	{
		userRole = doc.RootElement.GetProperty("UserRole").GetString();
	}
	if (userRole == "Administrator użytkowników" || userRole == "Lokator" || userRole == "Zarządca osiedla")
	{
		Context.Response.Redirect("/Home/NotAuthorized");
	}
}
@model UserModel

<div class="tasksData" data-tasks="@tasksJson" id="showArchivedTechTasks"></div>
<div class="upperpanel">
	<div class="sitename">
		<h2>Wyświetl zamknięte zgłoszenia techniczne</h2>
	</div>
	<a href="@Url.Action("Logout","User")">
		<div class="function">
			Wyloguj
		</div>
	</a>
</div>

<div class="text-center dataTableDiv" id="showTechTasksDiv">
	<table id="showTechTasksTable" class="techTasksTable dataTable">
		<thead>
			<tr>
				<th>Numer zgłoszenia</th>
				<th>Temat zgłoszenia</th>
				<th>Kategoria zgłoszenia</th>
				<th>Data utworzenia zgłoszenia</th>
				<th>Status zgłoszenia</th>
			</tr>
		</thead>
	</table>
</div>
<div class="returnButton">
	<a asp-area="" asp-controller="User" asp-action="UserMenu">
		<div class="returnMenu">
			<h4>Powrót do menu</h4>
		</div>
	</a>
</div>